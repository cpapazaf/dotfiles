# DEPENDENCIES:
# 1) brew install reattach-to-user-namespace


# Use backtick as the prefix
# Do it just like this or you will not
# be able to use type backtick literally
unbind C-b
set -g prefix `
bind ` send-prefix
bind-key L last-window

# reload config file (change file location to your the tmux.conf you want to use)
bind r source-file ~/.tmux.conf

# split panes using | and -
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

set -g default-terminal "screen-256color"

set -g default-command "reattach-to-user-namespace -l zsh"
set-option -g default-command /bin/zsh
#set-option -g default-shell /bin/bash

# Start numbering at 1
set -g base-index 1

# Enable mouse mode (tmux 2.1 and above)
# use mouse to resize panes
set -g mouse on

# Scroll History
set -g history-limit 30000

# Set ability to capture on start and restore on exit window data when running an application
setw -g alternate-screen on

# Basically allows for faster key repetition
set -s escape-time 0

# Turn on vi bindings in copy mode
set-option -g status-keys vi
set-window-option -g mode-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# switch panes using Alt-arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Copy to OSX clipboard
set-option -g default-command "reattach-to-user-namespace -l bash" # or zsh...
bind C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
bind C-v run "reattach-to-user-namespace pbpaste | tmux load-buffer - && tmux paste-buffer"


# Allows us to use '<prefix>-a' <command> to send commands to a TMUX session inside
# another TMUX session
bind-key a send-prefix

# Highlight active window
set-window-option -g window-status-current-bg red

# Run tests easily
#bind-key > run-shell "tmux send-keys -t right tox C-m"
#bind-key < run-shell "tmux send-keys -t right 'nosetests tests/' C-m"


# --------------------------------------
# Status Bar
# --------------------------------------
set-option -g status on                # turn the status bar on
#set -g status-utf8 on                  # set utf-8 for the status bar
set -g status-interval 5               # set update frequencey (default 15 seconds)
set -g status-justify centre           # center window list for clarity
set-option -g status-position top    # position the status bar at top of screen

# visual notification of activity in other windows
setw -g monitor-activity on
set -g visual-activity on

# set color for status bar
set-option -g status-bg colour235 #base02
set-option -g status-fg yellow #yellow
set-option -g status-attr dim

# set window list colors - red for active and cyan for inactive
set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg colour236
set-window-option -g window-status-attr dim

set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg colour236
set-window-option -g window-status-current-attr bright

# show host name on left side of status bar
set -g status-left-length 70
set -g status-left '\
#[fg=green,bg=colour233]#(whoami)@#h \
#[fg=colour233,bg=colour237] \
#[fg=colour249,bg=colour237]#(basename #{pane_current_path}) \
#[fg=colour237,bg=colour245] \
#[fg=colour233,bg=colour245]#{pane_current_command} \
#[fg=colour245,bg=colour233] \
#[default]\
'

# show session name, window & pane number, date and time on right side of
# status bar
set -g status-right-length 80
set -g status-right '\
#[fg=white]Ses:#S Win:#I-#P \
#[fg=yellow]:: Bat:#(sh ~/.tmux/battery_percentage.sh) \
:: CPU:#(sh ~/.tmux/cpu.sh) \
:: Net:#(sh ~/.tmux/network.sh)  \
#[fg=green]:: %d/%m/%Y %H:%M:%S \
#[default]\
'

# Rather than constraining window size to the maximum size of any client
# connected to the *session*, constrain window size to the maximum size of any
# client connected to *that window*. Much more reasonable.
setw -g aggressive-resize on

# -------------------------------------

